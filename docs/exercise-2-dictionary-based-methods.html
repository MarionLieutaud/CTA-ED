<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 18 Exercise 2: Dictionary-based methods | Computational Text Analysis</title>
<meta name="author" content="Christopher Barrie">
<meta name="description" content="18.1 Introduction In this tutorial, you will learn how to: Use dictionary-based techniques to analyze text Use common sentiment dictionaries Create your own “dictionary” Use the Lexicoder...">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="Chapter 18 Exercise 2: Dictionary-based methods | Computational Text Analysis">
<meta property="og:type" content="book">
<meta property="og:url" content="https://cjbarrie.github.io/CTA-ED/exercise-2-dictionary-based-methods.html">
<meta property="og:image" content="https://cjbarrie.github.io/CTA-ED/coverb.png">
<meta property="og:description" content="18.1 Introduction In this tutorial, you will learn how to: Use dictionary-based techniques to analyze text Use common sentiment dictionaries Create your own “dictionary” Use the Lexicoder...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 18 Exercise 2: Dictionary-based methods | Computational Text Analysis">
<meta name="twitter:description" content="18.1 Introduction In this tutorial, you will learn how to: Use dictionary-based techniques to analyze text Use common sentiment dictionaries Create your own “dictionary” Use the Lexicoder...">
<meta name="twitter:image" content="https://cjbarrie.github.io/CTA-ED/coverb.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.11/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS -->
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Computational Text Analysis</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">“Computational Text Analysis” (PGSP11584)</a></li>
<li><a class="" href="course-overview.html">Course Overview</a></li>
<li><a class="" href="introduction-to-r.html">Introduction to R</a></li>
<li><a class="" href="week-1.html"><span class="header-section-number">1</span> Week 1</a></li>
<li><a class="" href="week-2.html"><span class="header-section-number">2</span> Week 2</a></li>
<li><a class="" href="week-2-demo.html"><span class="header-section-number">3</span> Week 2 Demo</a></li>
<li><a class="" href="week-3.html"><span class="header-section-number">4</span> Week 3</a></li>
<li><a class="" href="week-3-demo.html"><span class="header-section-number">5</span> Week 3 Demo</a></li>
<li><a class="" href="week-4.html"><span class="header-section-number">6</span> Week 4</a></li>
<li><a class="" href="week-4-demo.html"><span class="header-section-number">7</span> Week 4 Demo</a></li>
<li><a class="" href="week-5.html"><span class="header-section-number">8</span> Week 5</a></li>
<li><a class="" href="week-5-demo.html"><span class="header-section-number">9</span> Week 5 Demo</a></li>
<li><a class="" href="week-6.html"><span class="header-section-number">10</span> Week 6</a></li>
<li><a class="" href="week-6-demo.html"><span class="header-section-number">11</span> Week 6 Demo</a></li>
<li><a class="" href="week-7.html"><span class="header-section-number">12</span> Week 7</a></li>
<li><a class="" href="week-7-demo.html"><span class="header-section-number">13</span> Week 7 Demo</a></li>
<li><a class="" href="week-8.html"><span class="header-section-number">14</span> Week 8</a></li>
<li><a class="" href="week-9.html"><span class="header-section-number">15</span> Week 9</a></li>
<li><a class="" href="week-10.html"><span class="header-section-number">16</span> Week 10</a></li>
<li><a class="" href="exercise-1-word-frequency-analysis.html"><span class="header-section-number">17</span> Exercise 1: Word frequency analysis</a></li>
<li><a class="active" href="exercise-2-dictionary-based-methods.html"><span class="header-section-number">18</span> Exercise 2: Dictionary-based methods</a></li>
<li><a class="" href="exercise-3-comparison-and-complexity.html"><span class="header-section-number">19</span> Exercise 3: Comparison and complexity</a></li>
<li><a class="" href="exercise-4-scaling-techniques.html"><span class="header-section-number">20</span> Exercise 4: Scaling techniques</a></li>
<li><a class="" href="exercise-5-unsupervised-learning-topic-models.html"><span class="header-section-number">21</span> Exercise 5: Unsupervised learning (topic models)</a></li>
<li><a class="" href="exercise-6-word-embedding.html"><span class="header-section-number">22</span> Exercise 6: Word embedding</a></li>
<li><a class="" href="exercise-7-sampling-text-information.html"><span class="header-section-number">23</span> Exercise 7: Sampling text information</a></li>
<li><a class="" href="assessment-data.html"><span class="header-section-number">24</span> Assessment data</a></li>
<li><a class="" href="references-2.html"><span class="header-section-number">25</span> References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/cjbarrie/CTA-ED">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="exercise-2-dictionary-based-methods" class="section level1" number="18">
<h1>
<span class="header-section-number">18</span> Exercise 2: Dictionary-based methods<a class="anchor" aria-label="anchor" href="#exercise-2-dictionary-based-methods"><i class="fas fa-link"></i></a>
</h1>
<div id="introduction-1" class="section level2" number="18.1">
<h2>
<span class="header-section-number">18.1</span> Introduction<a class="anchor" aria-label="anchor" href="#introduction-1"><i class="fas fa-link"></i></a>
</h2>
<p>In this tutorial, you will learn how to:</p>
<ul>
<li>Use dictionary-based techniques to analyze text</li>
<li>Use common sentiment dictionaries</li>
<li>Create your own “dictionary”</li>
<li>Use the Lexicoder sentiment dictionary from <span class="citation">Young and Soroka (<a href="references-2.html#ref-young_affective_2012" role="doc-biblioref">2012</a>)</span>
</li>
</ul>
</div>
<div id="setup-7" class="section level2" number="18.2">
<h2>
<span class="header-section-number">18.2</span> Setup<a class="anchor" aria-label="anchor" href="#setup-7"><i class="fas fa-link"></i></a>
</h2>
<p>The hands-on exercise for this week uses dictionary-based methods for filtering and scoring words. Dictionary-based methods use pre-generated lexicons, which are no more than list of words with associated scores or variables measuring the valence of a particular word. In this sense, the exercise is not unlike our analysis of Edinburgh Book Festival event descriptions. Here, we were filtering descriptions based on the presence or absence of a word related to women or gender. We can understand this approach as a particularly simple type of “dictionary-based” method. Here, our “dictionary” or “lexicon” contained just a few words related to gender.</p>
</div>
<div id="load-data-and-packages-1" class="section level2" number="18.3">
<h2>
<span class="header-section-number">18.3</span> Load data and packages<a class="anchor" aria-label="anchor" href="#load-data-and-packages-1"><i class="fas fa-link"></i></a>
</h2>
<p>Before proceeding, we’ll load the remaining packages we will need for this tutorial.</p>
<div class="sourceCode" id="cb213"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/cjbarrie/academictwitteR">academictwitteR</a></span><span class="op">)</span> <span class="co"># for fetching Twitter data</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span> <span class="co"># loads dplyr, ggplot2, and others</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://readr.tidyverse.org">readr</a></span><span class="op">)</span> <span class="co"># more informative and easy way to import data</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://stringr.tidyverse.org">stringr</a></span><span class="op">)</span> <span class="co"># to handle text elements</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/juliasilge/tidytext">tidytext</a></span><span class="op">)</span> <span class="co"># includes set of functions useful for manipulating text</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://quanteda.io">quanteda</a></span><span class="op">)</span> <span class="co"># includes functions to implement Lexicoder</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/EmilHvitfeldt/textdata">textdata</a></span><span class="op">)</span></code></pre></div>
<p>In this exercise we’ll be using another new dataset. The data were collected from the Twitter accounts of the top eight newspapers in the UK by circulation. You can see the names of the newspapers in the code below:</p>
<div class="sourceCode" id="cb214"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">newspapers</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"TheSun"</span>, <span class="st">"DailyMailUK"</span>, <span class="st">"MetroUK"</span>, <span class="st">"DailyMirror"</span>, 
               <span class="st">"EveningStandard"</span>, <span class="st">"thetimes"</span>, <span class="st">"Telegraph"</span>, <span class="st">"guardian"</span><span class="op">)</span>

<span class="va">tweets</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/pkg/academictwitteR/man/get_all_tweets.html">get_all_tweets</a></span><span class="op">(</span>
    users <span class="op">=</span> <span class="va">newspapers</span>,
    start_tweets <span class="op">=</span> <span class="st">"2020-01-01T00:00:00Z"</span>,
    end_tweets <span class="op">=</span> <span class="st">"2020-05-01T00:00:00Z"</span>,
    data_path <span class="op">=</span> <span class="st">"data/sentanalysis/"</span>,
    n <span class="op">=</span> <span class="cn">Inf</span>,
  <span class="op">)</span>

<span class="va">tweets</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://rdrr.io/pkg/academictwitteR/man/bind_tweets.html">bind_tweets</a></span><span class="op">(</span>data_path <span class="op">=</span> <span class="st">"data/sentanalysis/"</span>, output_format <span class="op">=</span> <span class="st">"tidy"</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">saveRDS</a></span><span class="op">(</span><span class="va">tweets</span>, <span class="st">"data/sentanalysis/newstweets.rds"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="data/sentanalysis/guardiancorona.png" style="width:100.0%"></div>
<p>For details of how to access Twitter data with <code>academictwitteR</code>, check out details of the package <a href="https://cran.r-project.org/web/packages/academictwitteR/index.html">here</a>.</p>
<p>We can download the final dataset with:</p>
<div class="sourceCode" id="cb215"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tweets</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">readRDS</a></span><span class="op">(</span><span class="st">"data/sentanalysis/newstweets.rds"</span><span class="op">)</span></code></pre></div>
<p>If you’re working on this document from your own computer (“locally”) you can download the tweets data in the following way:</p>
<div class="sourceCode" id="cb216"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tweets</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/gzcon.html">gzcon</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/connections.html">url</a></span><span class="op">(</span><span class="st">"https://github.com/cjbarrie/CTA-ED/blob/main/data/sentanalysis/newstweets.rds?raw=true"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
<div id="inspect-and-filter-data-1" class="section level2" number="18.4">
<h2>
<span class="header-section-number">18.4</span> Inspect and filter data<a class="anchor" aria-label="anchor" href="#inspect-and-filter-data-1"><i class="fas fa-link"></i></a>
</h2>
<p>Let’s have a look at the data:</p>
<div class="sourceCode" id="cb217"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">tweets</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 31
##   tweet_id  user_username text  lang  author_id source possibly_sensit… conversation_id created_at user_url
##   &lt;chr&gt;     &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt;  &lt;lgl&gt;            &lt;chr&gt;           &lt;chr&gt;      &lt;chr&gt;   
## 1 12123344… DailyMirror   "Sec… en    16887175  Tweet… FALSE            12123344022665… 2020-01-0… https:/…
## 2 12123341… DailyMirror   "RT … en    16887175  Tweet… FALSE            12123341694576… 2020-01-0… https:/…
## 3 12123331… thetimes      "A c… en    6107422   Echob… FALSE            12123331958799… 2020-01-0… http://…
## 4 12123331… TheSun        "Way… en    34655603  Echob… FALSE            12123331948649… 2020-01-0… https:/…
## 5 12123329… DailyMailUK   "Stu… en    111556423 Socia… FALSE            12123329205071… 2020-01-0… https:/…
## 6 12123326… TheSun        "Dad… en    34655603  Twitt… FALSE            12123326405708… 2020-01-0… https:/…
## # … with 21 more variables: user_location &lt;chr&gt;, user_protected &lt;lgl&gt;, user_verified &lt;lgl&gt;,
## #   user_name &lt;chr&gt;, user_profile_image_url &lt;chr&gt;, user_description &lt;chr&gt;, user_created_at &lt;chr&gt;,
## #   user_pinned_tweet_id &lt;chr&gt;, retweet_count &lt;int&gt;, like_count &lt;int&gt;, quote_count &lt;int&gt;,
## #   user_tweet_count &lt;int&gt;, user_list_count &lt;int&gt;, user_followers_count &lt;int&gt;, user_following_count &lt;int&gt;,
## #   sourcetweet_type &lt;chr&gt;, sourcetweet_id &lt;chr&gt;, sourcetweet_text &lt;chr&gt;, sourcetweet_lang &lt;chr&gt;,
## #   sourcetweet_author_id &lt;chr&gt;, in_reply_to_user_id &lt;chr&gt;</code></pre>
<div class="sourceCode" id="cb219"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">tweets</span><span class="op">)</span></code></pre></div>
<pre><code>##  [1] "tweet_id"               "user_username"          "text"                   "lang"                  
##  [5] "author_id"              "source"                 "possibly_sensitive"     "conversation_id"       
##  [9] "created_at"             "user_url"               "user_location"          "user_protected"        
## [13] "user_verified"          "user_name"              "user_profile_image_url" "user_description"      
## [17] "user_created_at"        "user_pinned_tweet_id"   "retweet_count"          "like_count"            
## [21] "quote_count"            "user_tweet_count"       "user_list_count"        "user_followers_count"  
## [25] "user_following_count"   "sourcetweet_type"       "sourcetweet_id"         "sourcetweet_text"      
## [29] "sourcetweet_lang"       "sourcetweet_author_id"  "in_reply_to_user_id"</code></pre>
<p>Each row here is a tweets produced by one of the news outlets detailed above over a five month period, January–May 2020. Note also that each tweets has a particular date. We can therefore use these to look at any over time changes.</p>
<p>We won’t need all of these variables so let’s just keep those that are of interest to us:</p>
<div class="sourceCode" id="cb221"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tweets</span> <span class="op">&lt;-</span> <span class="va">tweets</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">user_username</span>, <span class="va">text</span>, <span class="va">created_at</span>, <span class="va">user_name</span>,
         <span class="va">retweet_count</span>, <span class="va">like_count</span>, <span class="va">quote_count</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>username <span class="op">=</span> <span class="va">user_username</span>,
         newspaper <span class="op">=</span> <span class="va">user_name</span>,
         tweet <span class="op">=</span> <span class="va">text</span><span class="op">)</span></code></pre></div>
<div class="inline-table"><table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:left;">
username
</th>
<th style="text-align:left;">
tweet
</th>
<th style="text-align:left;">
created_at
</th>
<th style="text-align:left;">
newspaper
</th>
<th style="text-align:right;">
retweet_count
</th>
<th style="text-align:right;">
like_count
</th>
<th style="text-align:right;">
quote_count
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
EveningStandard
</td>
<td style="text-align:left;">
We can’t complain: Two men spend coronavirus lockdown in London pub with ‘fresh beer on tap’ 🍺 <a href="https://t.co/rG65nGWv6q" class="uri">https://t.co/rG65nGWv6q</a>
</td>
<td style="text-align:left;">
2020-04-30T23:43:24.000Z
</td>
<td style="text-align:left;">
Evening Standard
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
EveningStandard
</td>
<td style="text-align:left;">
Best home spa treatments: face, body, nail and hair products for home <a href="https://t.co/nDZ65BbbVs" class="uri">https://t.co/nDZ65BbbVs</a>
</td>
<td style="text-align:left;">
2020-04-30T23:57:09.000Z
</td>
<td style="text-align:left;">
Evening Standard
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
guardian
</td>
<td style="text-align:left;">
Coronavirus live news: Trump claims to have evidence virus started in Wuhan lab as UK is ‘past the peak’ <a href="https://t.co/LZv4yx2kn2" class="uri">https://t.co/LZv4yx2kn2</a>
</td>
<td style="text-align:left;">
2020-04-30T23:57:59.000Z
</td>
<td style="text-align:left;">
The Guardian
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:left;">
guardian
</td>
<td style="text-align:left;">
Rugby league gets £16m emergency loan from government <a href="https://t.co/kZ9PP4aWjO" class="uri">https://t.co/kZ9PP4aWjO</a>
</td>
<td style="text-align:left;">
2020-04-30T23:57:59.000Z
</td>
<td style="text-align:left;">
The Guardian
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
guardian
</td>
<td style="text-align:left;">
Coronavirus latest: at a glance <a href="https://t.co/OrWrEdOwoU" class="uri">https://t.co/OrWrEdOwoU</a>
</td>
<td style="text-align:left;">
2020-04-30T23:58:01.000Z
</td>
<td style="text-align:left;">
The Guardian
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
3
</td>
</tr>
</tbody>
</table></div>
<p>We manipulate the data into tidy format again, unnesting each token (here: words) from the tweet text.</p>
<div class="sourceCode" id="cb222"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tidy_tweets</span> <span class="op">&lt;-</span> <span class="va">tweets</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>desc <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/chartr.html">tolower</a></span><span class="op">(</span><span class="va">tweet</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">desc</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span><span class="va">word</span>, <span class="st">"[a-z]"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>We’ll then tidy this further, as in the previous example, by removing stop words:</p>
<div class="sourceCode" id="cb223"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tidy_tweets</span> <span class="op">&lt;-</span> <span class="va">tidy_tweets</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="va">word</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="va">stop_words</span><span class="op">$</span><span class="va">word</span><span class="op">)</span></code></pre></div>
</div>
<div id="get-sentiment-dictionaries" class="section level2" number="18.5">
<h2>
<span class="header-section-number">18.5</span> Get sentiment dictionaries<a class="anchor" aria-label="anchor" href="#get-sentiment-dictionaries"><i class="fas fa-link"></i></a>
</h2>
<p>Several sentiment dictionaries come bundled with the <tt>tidytext</tt> package. These are:</p>
<ul>
<li>
<code>AFINN</code> from <a href="http://www2.imm.dtu.dk/pubdb/views/publication_details.php?id=6010">Finn Årup Nielsen</a>,</li>
<li>
<code>bing</code> from <a href="https://www.cs.uic.edu/~liub/FBS/sentiment-analysis.html">Bing Liu and collaborators</a>, and</li>
<li>
<code>nrc</code> from <a href="http://saifmohammad.com/WebPages/NRC-Emotion-Lexicon.htm">Saif Mohammad and Peter Turney</a>
</li>
</ul>
<p>We can have a look at some of these to see how the relevant dictionaries are stored.</p>
<div class="sourceCode" id="cb224"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/get_sentiments.html">get_sentiments</a></span><span class="op">(</span><span class="st">"afinn"</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 2,477 × 2
##    word       value
##    &lt;chr&gt;      &lt;dbl&gt;
##  1 abandon       -2
##  2 abandoned     -2
##  3 abandons      -2
##  4 abducted      -2
##  5 abduction     -2
##  6 abductions    -2
##  7 abhor         -3
##  8 abhorred      -3
##  9 abhorrent     -3
## 10 abhors        -3
## # … with 2,467 more rows</code></pre>
<div class="sourceCode" id="cb226"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/get_sentiments.html">get_sentiments</a></span><span class="op">(</span><span class="st">"bing"</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 6,786 × 2
##    word        sentiment
##    &lt;chr&gt;       &lt;chr&gt;    
##  1 2-faces     negative 
##  2 abnormal    negative 
##  3 abolish     negative 
##  4 abominable  negative 
##  5 abominably  negative 
##  6 abominate   negative 
##  7 abomination negative 
##  8 abort       negative 
##  9 aborted     negative 
## 10 aborts      negative 
## # … with 6,776 more rows</code></pre>
<div class="sourceCode" id="cb228"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/get_sentiments.html">get_sentiments</a></span><span class="op">(</span><span class="st">"nrc"</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 13,875 × 2
##    word        sentiment
##    &lt;chr&gt;       &lt;chr&gt;    
##  1 abacus      trust    
##  2 abandon     fear     
##  3 abandon     negative 
##  4 abandon     sadness  
##  5 abandoned   anger    
##  6 abandoned   fear     
##  7 abandoned   negative 
##  8 abandoned   sadness  
##  9 abandonment anger    
## 10 abandonment fear     
## # … with 13,865 more rows</code></pre>
<p>What do we see here. First, the <code>AFINN</code> lexicon gives words a score from -5 to +5, where more negative scores indicate more negative sentiment and more positive scores indicate more positive sentiment. The <code>nrc</code> lexicon opts for a binary classification: positive, negative, anger, anticipation, disgust, fear, joy, sadness, surprise, and trust, with each word given a score of 1/0 for each of these sentiments. In other words, for the <code>nrc</code> lexicon, words appear multiple times if they enclose more than one such emotion (see, e.g., “abandon” above). The <code>bing</code> lexicon is most minimal, classifying words simply into binary “positive” or “negative” categories.</p>
<p>Let’s see how we might filter the texts by selecting a dictionary, or subset of a dictionary, and using <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">inner_join()</a></code> to then filter out tweet data. We might, for example, be interested in fear words. Maybe, we might hypothesize, there is a uptick of fear toward the beginning of the coronavirus outbreak. First, let’s have a look at the words in our tweet data that the <code>nrc</code> lexicon codes as fear-related words.</p>
<div class="sourceCode" id="cb230"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">nrc_fear</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/get_sentiments.html">get_sentiments</a></span><span class="op">(</span><span class="st">"nrc"</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">sentiment</span> <span class="op">==</span> <span class="st">"fear"</span><span class="op">)</span>

<span class="va">tidy_tweets</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">inner_join</a></span><span class="op">(</span><span class="va">nrc_fear</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">word</span>, sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code>## Joining, by = "word"</code></pre>
<pre><code>## # A tibble: 1,173 × 2
##    word           n
##    &lt;chr&gt;      &lt;int&gt;
##  1 mum         4509
##  2 death       4073
##  3 police      3275
##  4 hospital    2240
##  5 government  2179
##  6 pandemic    1877
##  7 fight       1309
##  8 die         1199
##  9 attack      1099
## 10 murder      1064
## # … with 1,163 more rows</code></pre>
<p>We have a total of 1,174 words with some fear valence in our tweet data according to the <code>nrc</code> classification. Several seem reasonable (e.g., “death,” “pandemic”); others seems less so (e.g., “mum,” “fight”).</p>
</div>
<div id="sentiment-trends-over-time" class="section level2" number="18.6">
<h2>
<span class="header-section-number">18.6</span> Sentiment trends over time<a class="anchor" aria-label="anchor" href="#sentiment-trends-over-time"><i class="fas fa-link"></i></a>
</h2>
<p>Do we see any time trends? First let’s make sure the data are properly arranged in ascending order by date. We’ll then add column, which we’ll call “order,” the use of which will become clear when we do the sentiment analysis.</p>
<div class="sourceCode" id="cb233"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#gen data variable, order and format date</span>
<span class="va">tidy_tweets</span><span class="op">$</span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="va">tidy_tweets</span><span class="op">$</span><span class="va">created_at</span><span class="op">)</span>

<span class="va">tidy_tweets</span> <span class="op">&lt;-</span> <span class="va">tidy_tweets</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span>

<span class="va">tidy_tweets</span><span class="op">$</span><span class="va">order</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">tidy_tweets</span><span class="op">)</span></code></pre></div>
<p>Remember that the structure of our tweet data is in a one token (word) per document (tweet) format. In order to look at sentiment trends over time, we’ll need to decide over how many words to estimate the sentiment.</p>
<p>In the below, we first add in our sentiment dictionary with <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">inner_join()</a></code>. We then use the <code><a href="https://dplyr.tidyverse.org/reference/count.html">count()</a></code> function, specifying that we want to count over dates, and that words should be indexed in order (i.e., by row number) over every 1000 rows (i.e., every 1000 words).</p>
<p>This means that if one date has many tweets totalling &gt;1000 words, then we will have multiple observations for that given date; if there are only one or two tweets then we might have just one row and associated sentiment score for that date.</p>
<p>We then calculate the sentiment scores for each of our sentiment types (positive, negative, anger, anticipation, disgust, fear, joy, sadness, surprise, and trust) and use the <code><a href="https://tidyr.tidyverse.org/reference/spread.html">spread()</a></code> function to convert these into separate columns (rather than rows). Finally we calculate a net sentiment score by subtracting the score for negative sentiment from positive sentiment.</p>
<div class="sourceCode" id="cb234"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#get tweet sentiment by date</span>
<span class="va">tweets_nrc_sentiment</span> <span class="op">&lt;-</span> <span class="va">tidy_tweets</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">inner_join</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/get_sentiments.html">get_sentiments</a></span><span class="op">(</span><span class="st">"nrc"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">date</span>, index <span class="op">=</span> <span class="va">order</span> <span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html">%/%</a></span> <span class="fl">1000</span>, <span class="va">sentiment</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/spread.html">spread</a></span><span class="op">(</span><span class="va">sentiment</span>, <span class="va">n</span>, fill <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>sentiment <span class="op">=</span> <span class="va">positive</span> <span class="op">-</span> <span class="va">negative</span><span class="op">)</span></code></pre></div>
<pre><code>## Joining, by = "word"</code></pre>
<div class="sourceCode" id="cb236"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tweets_nrc_sentiment</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">sentiment</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>alpha<span class="op">=</span><span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method<span class="op">=</span> <span class="va">loess</span>, alpha<span class="op">=</span><span class="fl">0.25</span><span class="op">)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula 'y ~ x'</code></pre>
<div class="inline-figure"><img src="main_files/figure-html/unnamed-chunk-133-1.png" width="672"></div>
<p>How do our different sentiment dictionaries look when compared to each other? We can then plot the sentiment scores over time for each of our sentiment dictionaries like so:</p>
<div class="sourceCode" id="cb238"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tidy_tweets</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">inner_join</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/get_sentiments.html">get_sentiments</a></span><span class="op">(</span><span class="st">"bing"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">date</span>, index <span class="op">=</span> <span class="va">order</span> <span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html">%/%</a></span> <span class="fl">1000</span>, <span class="va">sentiment</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/spread.html">spread</a></span><span class="op">(</span><span class="va">sentiment</span>, <span class="va">n</span>, fill <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>sentiment <span class="op">=</span> <span class="va">positive</span> <span class="op">-</span> <span class="va">negative</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">sentiment</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>alpha<span class="op">=</span><span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method<span class="op">=</span> <span class="va">loess</span>, alpha<span class="op">=</span><span class="fl">0.25</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"bing sentiment"</span><span class="op">)</span></code></pre></div>
<pre><code>## Joining, by = "word"
## `geom_smooth()` using formula 'y ~ x'</code></pre>
<div class="inline-figure"><img src="main_files/figure-html/unnamed-chunk-134-1.png" width="672"></div>
<div class="sourceCode" id="cb240"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tidy_tweets</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">inner_join</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/get_sentiments.html">get_sentiments</a></span><span class="op">(</span><span class="st">"nrc"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">date</span>, index <span class="op">=</span> <span class="va">order</span> <span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html">%/%</a></span> <span class="fl">1000</span>, <span class="va">sentiment</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/spread.html">spread</a></span><span class="op">(</span><span class="va">sentiment</span>, <span class="va">n</span>, fill <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>sentiment <span class="op">=</span> <span class="va">positive</span> <span class="op">-</span> <span class="va">negative</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">sentiment</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>alpha<span class="op">=</span><span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method<span class="op">=</span> <span class="va">loess</span>, alpha<span class="op">=</span><span class="fl">0.25</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"nrc sentiment"</span><span class="op">)</span></code></pre></div>
<pre><code>## Joining, by = "word"
## `geom_smooth()` using formula 'y ~ x'</code></pre>
<div class="inline-figure"><img src="main_files/figure-html/unnamed-chunk-134-2.png" width="672"></div>
<div class="sourceCode" id="cb242"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tidy_tweets</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">inner_join</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/get_sentiments.html">get_sentiments</a></span><span class="op">(</span><span class="st">"afinn"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">date</span>, index <span class="op">=</span> <span class="va">order</span> <span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html">%/%</a></span> <span class="fl">1000</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>sentiment <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">sentiment</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>alpha<span class="op">=</span><span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method<span class="op">=</span> <span class="va">loess</span>, alpha<span class="op">=</span><span class="fl">0.25</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"afinn sentiment"</span><span class="op">)</span></code></pre></div>
<pre><code>## Joining, by = "word"
## `summarise()` has grouped output by 'date'. You can override using the `.groups` argument.
## `geom_smooth()` using formula 'y ~ x'</code></pre>
<div class="inline-figure"><img src="main_files/figure-html/unnamed-chunk-134-3.png" width="672"></div>
<p>We see that they do look pretty similar… and interestingly it seems that overall sentiment positivity <em>increases</em> as the pandemic breaks.</p>
</div>
<div id="domain-specific-lexicons" class="section level2" number="18.7">
<h2>
<span class="header-section-number">18.7</span> Domain-specific lexicons<a class="anchor" aria-label="anchor" href="#domain-specific-lexicons"><i class="fas fa-link"></i></a>
</h2>
<p>Of course, list- or dictionary-based methods need not only focus on sentiment, even if this is one of their most common uses. In essence, what you’ll have seen from the above is that sentiment analysis techniques rely on a given lexicon and score words appropriately. And there is nothing stopping us from making our own dictionaries, whether they measure sentiment or not. In the data above, we might be interested, for example, in the prevalence of mortality-related words in the news. As such, we might choose to make our own dictionary of terms. What would this look like?</p>
<p>A very minimal example would choose, for example, words like “death” and its synonyms and score these all as 1. We would then combine these into a dictionary, which we’ve called “mordict” here.</p>
<div class="sourceCode" id="cb244"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">word</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'death'</span>, <span class="st">'illness'</span>, <span class="st">'hospital'</span>, <span class="st">'life'</span>, <span class="st">'health'</span>,
             <span class="st">'fatality'</span>, <span class="st">'morbidity'</span>, <span class="st">'deadly'</span>, <span class="st">'dead'</span>, <span class="st">'victim'</span><span class="op">)</span>
<span class="va">value</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>
<span class="va">mordict</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">value</span><span class="op">)</span>
<span class="va">mordict</span></code></pre></div>
<pre><code>##         word value
## 1      death     1
## 2    illness     1
## 3   hospital     1
## 4       life     1
## 5     health     1
## 6   fatality     1
## 7  morbidity     1
## 8     deadly     1
## 9       dead     1
## 10    victim     1</code></pre>
<p>We could then use the same technique as above to bind these with our data and look at the incidence of such words over time. Combining the sequence of scripts from above we would do the following:</p>
<div class="sourceCode" id="cb246"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tidy_tweets</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">inner_join</a></span><span class="op">(</span><span class="va">mordict</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">date</span>, index <span class="op">=</span> <span class="va">order</span> <span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html">%/%</a></span> <span class="fl">1000</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>morwords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">morwords</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>stat<span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"mortality words"</span><span class="op">)</span></code></pre></div>
<pre><code>## Joining, by = "word"
## `summarise()` has grouped output by 'date'. You can override using the `.groups` argument.</code></pre>
<div class="inline-figure"><img src="main_files/figure-html/unnamed-chunk-136-1.png" width="672"></div>
<p>The above simply counts the number of mortality words over time. This might be misleading if there are, for example, more or longer tweets at certain points in time; i.e., if the length or quantity of text is not time-constant.</p>
<p>Why would this matter? Well, in the above it could just be that we have more mortality words later on because there are just more tweets earlier on. By just counting words, we are not taking into account the <em>denominator</em>.</p>
<p>An alternative, and preferable, method here would simply take a character string of the relevant words. We would then sum the total number of words across all tweets over time. Then we would filter our tweet words by whether or not they are a mortality word or not, according to the dictionary of words we have constructed. We would then do the same again with these words, summing the number of times they appear for each date.</p>
<p>After this, we join with our data frame of total words for each date. Note that here we are using <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">full_join()</a></code> as we want to include dates that appear in the “totals” data frame that do not appear when we filter for mortality words; i.e., days when mortality words are equal to 0. We then go about plotting as before.</p>
<div class="sourceCode" id="cb248"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mordict</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'death'</span>, <span class="st">'illness'</span>, <span class="st">'hospital'</span>, <span class="st">'life'</span>, <span class="st">'health'</span>,
             <span class="st">'fatality'</span>, <span class="st">'morbidity'</span>, <span class="st">'deadly'</span>, <span class="st">'dead'</span>, <span class="st">'victim'</span><span class="op">)</span>

<span class="co">#get total tweets per day (no missing dates so no date completion required)</span>
<span class="va">totals</span> <span class="op">&lt;-</span> <span class="va">tidy_tweets</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>obs<span class="op">=</span><span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>sum_words <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">obs</span><span class="op">)</span><span class="op">)</span>

<span class="co">#plot</span>
<span class="va">tidy_tweets</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>obs<span class="op">=</span><span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">mordict</span>, collapse <span class="op">=</span> <span class="st">"|"</span><span class="op">)</span>,<span class="va">word</span>, ignore.case <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>sum_mwords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">obs</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">full_join</a></span><span class="op">(</span><span class="va">totals</span>, <span class="va">word</span>, by<span class="op">=</span><span class="st">"date"</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>sum_mwords<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">sum_mwords</span><span class="op">)</span>, <span class="fl">0</span>, <span class="va">sum_mwords</span><span class="op">)</span>,
         pctmwords <span class="op">=</span> <span class="va">sum_mwords</span><span class="op">/</span><span class="va">sum_words</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">pctmwords</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>alpha<span class="op">=</span><span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method<span class="op">=</span> <span class="va">loess</span>, alpha<span class="op">=</span><span class="fl">0.25</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">"Date"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"% mortality words"</span><span class="op">)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula 'y ~ x'</code></pre>
<div class="inline-figure"><img src="main_files/figure-html/unnamed-chunk-137-1.png" width="672"></div>
</div>
<div id="using-lexicoder" class="section level2" number="18.8">
<h2>
<span class="header-section-number">18.8</span> Using Lexicoder<a class="anchor" aria-label="anchor" href="#using-lexicoder"><i class="fas fa-link"></i></a>
</h2>
<p>The above approaches use general dictionary-based techniques that were not designed for domain-specific text such as news text. The Lexicoder Sentiment Dictionary, by <span class="citation">Young and Soroka (<a href="references-2.html#ref-young_affective_2012" role="doc-biblioref">2012</a>)</span> was designed specifically for examining the affective content of news text. In what follows, we will see how to implement an analysis using this dictionary.</p>
<p>We will conduct the analysis using the <code>quanteda</code> package. You will see that we can tokenize text in a similar way using functions included in the quanteda package.</p>
<p>With the <code>quanteda</code> package we first need to create a “corpus” object, by declaring our tweets a corpus object. Here, we make sure our date column is correctly stored and then create the corpus object with the <code><a href="https://quanteda.io/reference/corpus.html">corpus()</a></code> function. Note that we are specifying the <code>text_field</code> as “tweet” as this is where our text data of interest is, and we are including information on the date that tweet was published. This information is specified with the <code>docvars</code> argument. You’ll see tthen that the corpus consists of the text and so-called “docvars,” which are just the variables (columns) in the original dataset. Here, we have only included the date column.</p>
<div class="sourceCode" id="cb250"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tweets</span><span class="op">$</span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="va">tweets</span><span class="op">$</span><span class="va">created_at</span><span class="op">)</span>

<span class="va">tweet_corpus</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/corpus.html">corpus</a></span><span class="op">(</span><span class="va">tweets</span>, text_field <span class="op">=</span> <span class="st">"tweet"</span>, docvars <span class="op">=</span> <span class="st">"date"</span><span class="op">)</span></code></pre></div>
<pre><code>## Warning: docvars argument is not used.</code></pre>
<p>We then tokenize our text using the <code><a href="https://quanteda.io/reference/tokens.html">tokens()</a></code> function from quanteda, removing punctuation along the way:</p>
<div class="sourceCode" id="cb252"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">toks_news</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/tokens.html">tokens</a></span><span class="op">(</span><span class="va">tweet_corpus</span>, remove_punct <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>We then take the <code>data_dictionary_LSD2015</code> that comes bundled with <code>quanteda</code> and and we select only the positive and negative categories, excluding words deemed “neutral.” After this, we are ready to “look up” in this dictionary how the tokens in our corpus are scored with the <code><a href="https://quanteda.io/reference/tokens_lookup.html">tokens_lookup()</a></code> function.</p>
<div class="sourceCode" id="cb253"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># select only the "negative" and "positive" categories</span>
<span class="va">data_dictionary_LSD2015_pos_neg</span> <span class="op">&lt;-</span> <span class="va">data_dictionary_LSD2015</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span>

<span class="va">toks_news_lsd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/tokens_lookup.html">tokens_lookup</a></span><span class="op">(</span><span class="va">toks_news</span>, dictionary <span class="op">=</span> <span class="va">data_dictionary_LSD2015_pos_neg</span><span class="op">)</span></code></pre></div>
<p>This creates a long list of all the texts (tweets) annotated with a series of ‘positive’ or ‘negative’ annotations depending on the valence of the words in that text. The creators of <code>quanteda</code> then recommend we generate a document feature matric from this. Grouping by date, we then get a dfm object, which is a quite convoluted list object that we can plot using base graphics functions for plotting matrices.</p>
<div class="sourceCode" id="cb254"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create a document document-feature matrix and group it by date</span>
<span class="va">dfmat_news_lsd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/dfm.html">dfm</a></span><span class="op">(</span><span class="va">toks_news_lsd</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://quanteda.io/reference/dfm_group.html">dfm_group</a></span><span class="op">(</span>groups <span class="op">=</span> <span class="va">date</span><span class="op">)</span>

<span class="co"># plot positive and negative valence over time</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/matplot.html">matplot</a></span><span class="op">(</span><span class="va">dfmat_news_lsd</span><span class="op">$</span><span class="va">date</span>, <span class="va">dfmat_news_lsd</span>, type <span class="op">=</span> <span class="st">"l"</span>, lty <span class="op">=</span> <span class="fl">1</span>, col <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,
        ylab <span class="op">=</span> <span class="st">"Frequency"</span>, xlab <span class="op">=</span> <span class="st">""</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/grid.html">grid</a></span><span class="op">(</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/legend.html">legend</a></span><span class="op">(</span><span class="st">"topleft"</span>, col <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, legend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">dfmat_news_lsd</span><span class="op">)</span>, lty <span class="op">=</span> <span class="fl">1</span>, bg <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="main_files/figure-html/unnamed-chunk-141-1.png" width="672"></div>
<div class="sourceCode" id="cb255"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># plot overall sentiment (positive  - negative) over time</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">dfmat_news_lsd</span><span class="op">$</span><span class="va">date</span>, <span class="va">dfmat_news_lsd</span><span class="op">[</span>,<span class="st">"positive"</span><span class="op">]</span> <span class="op">-</span> <span class="va">dfmat_news_lsd</span><span class="op">[</span>,<span class="st">"negative"</span><span class="op">]</span>, 
     type <span class="op">=</span> <span class="st">"l"</span>, ylab <span class="op">=</span> <span class="st">"Sentiment"</span>, xlab <span class="op">=</span> <span class="st">""</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/grid.html">grid</a></span><span class="op">(</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/abline.html">abline</a></span><span class="op">(</span>h <span class="op">=</span> <span class="fl">0</span>, lty <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="main_files/figure-html/unnamed-chunk-141-2.png" width="672"></div>
<p>Alternatively, we can recreate this in tidy format as follows:</p>
<div class="sourceCode" id="cb256"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">negative</span> <span class="op">&lt;-</span> <span class="va">dfmat_news_lsd</span><span class="op">@</span><span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">121</span><span class="op">]</span>
<span class="va">positive</span> <span class="op">&lt;-</span> <span class="va">dfmat_news_lsd</span><span class="op">@</span><span class="va">x</span><span class="op">[</span><span class="fl">122</span><span class="op">:</span><span class="fl">242</span><span class="op">]</span>
<span class="va">date</span> <span class="op">&lt;-</span> <span class="va">dfmat_news_lsd</span><span class="op">@</span><span class="va">Dimnames</span><span class="op">$</span><span class="va">docs</span>


<span class="va">tidy_sent</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">negative</span>, <span class="va">positive</span>, <span class="va">date</span><span class="op">)</span><span class="op">)</span>

<span class="va">tidy_sent</span><span class="op">$</span><span class="va">negative</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">tidy_sent</span><span class="op">$</span><span class="va">negative</span><span class="op">)</span>
<span class="va">tidy_sent</span><span class="op">$</span><span class="va">positive</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">tidy_sent</span><span class="op">$</span><span class="va">positive</span><span class="op">)</span>
<span class="va">tidy_sent</span><span class="op">$</span><span class="va">sentiment</span> <span class="op">&lt;-</span> <span class="va">tidy_sent</span><span class="op">$</span><span class="va">positive</span> <span class="op">-</span> <span class="va">tidy_sent</span><span class="op">$</span><span class="va">negative</span>
<span class="va">tidy_sent</span><span class="op">$</span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="va">tidy_sent</span><span class="op">$</span><span class="va">date</span><span class="op">)</span></code></pre></div>
<p>And plot accordingly:</p>
<div class="sourceCode" id="cb257"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tidy_sent</span> <span class="op"><a href="https://rdrr.io/pkg/academictwitteR/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">sentiment</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="main_files/figure-html/unnamed-chunk-143-1.png" width="672"></div>
</div>
<div id="exercises-1" class="section level2" number="18.9">
<h2>
<span class="header-section-number">18.9</span> Exercises<a class="anchor" aria-label="anchor" href="#exercises-1"><i class="fas fa-link"></i></a>
</h2>
<ol style="list-style-type: decimal">
<li>Take a subset of the tweets data by “user_name” These names describe the name of the newspaper source of the Twitter account. Do we see different sentiment dynamics if we look only at different newspaper sources?</li>
<li>Build your own (minimal) dictionary-based filter technique and plot the result</li>
<li>Apply the Lexicoder Sentiment Dictionary to the news tweets, but break down the analysis by newspaper</li>
</ol>
</div>
<div id="references-1" class="section level2" number="18.10">
<h2>
<span class="header-section-number">18.10</span> References<a class="anchor" aria-label="anchor" href="#references-1"><i class="fas fa-link"></i></a>
</h2>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="exercise-1-word-frequency-analysis.html"><span class="header-section-number">17</span> Exercise 1: Word frequency analysis</a></div>
<div class="next"><a href="exercise-3-comparison-and-complexity.html"><span class="header-section-number">19</span> Exercise 3: Comparison and complexity</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#exercise-2-dictionary-based-methods"><span class="header-section-number">18</span> Exercise 2: Dictionary-based methods</a></li>
<li><a class="nav-link" href="#introduction-1"><span class="header-section-number">18.1</span> Introduction</a></li>
<li><a class="nav-link" href="#setup-7"><span class="header-section-number">18.2</span> Setup</a></li>
<li><a class="nav-link" href="#load-data-and-packages-1"><span class="header-section-number">18.3</span> Load data and packages</a></li>
<li><a class="nav-link" href="#inspect-and-filter-data-1"><span class="header-section-number">18.4</span> Inspect and filter data</a></li>
<li><a class="nav-link" href="#get-sentiment-dictionaries"><span class="header-section-number">18.5</span> Get sentiment dictionaries</a></li>
<li><a class="nav-link" href="#sentiment-trends-over-time"><span class="header-section-number">18.6</span> Sentiment trends over time</a></li>
<li><a class="nav-link" href="#domain-specific-lexicons"><span class="header-section-number">18.7</span> Domain-specific lexicons</a></li>
<li><a class="nav-link" href="#using-lexicoder"><span class="header-section-number">18.8</span> Using Lexicoder</a></li>
<li><a class="nav-link" href="#exercises-1"><span class="header-section-number">18.9</span> Exercises</a></li>
<li><a class="nav-link" href="#references-1"><span class="header-section-number">18.10</span> References</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/cjbarrie/CTA-ED/blob/master/12-sent-analysis.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/cjbarrie/CTA-ED/edit/master/12-sent-analysis.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Computational Text Analysis</strong>" was written by Christopher Barrie. It was last built on 2022-03-16.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
